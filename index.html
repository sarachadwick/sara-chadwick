<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <title>sara-chadwick</title>
    <script>
      // Test if we can fetch the main.js file directly
      fetch('/src/main.js', { cache: 'no-store' })
        .then(response => {
          return response.text();
        })
        .then(text => {
          if (text.trim().startsWith('<!')) {
            // Got HTML instead of JavaScript
          }
        })
        .catch(err => {
          // Error fetching /src/main.js
        });
      
      // Test if we can fetch the Vite client
      fetch('/@vite/client', { cache: 'no-store' })
        .then(response => {
          return response.text();
        })
        .then(text => {
          if (text.trim().startsWith('<!')) {
            // Got HTML instead of JavaScript for Vite client
          }
        })
        .catch(err => {
          // Error fetching /@vite/client
        });
      
      // Immediately unregister service worker during development (localhost)
      // this must run BEFORE any module scripts to prevent interception
      (function() {
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
          if ('serviceWorker' in navigator) {
            // Unregister all service workers immediately
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
              if (registrations.length > 0) {
                registrations.forEach(function(registration) {
                  registration.unregister().then(function(success) {
                    // Service worker unregistered for development
                  });
                });
                
                // Clear all caches
                if ('caches' in window) {
                  caches.keys().then(function(names) {
                    names.forEach(function(name) {
                      caches.delete(name);
                    });
                  });
                }
                
                // If service worker is controlling the page, reload once
                if (navigator.serviceWorker.controller && !sessionStorage.getItem('sw-reload-done')) {
                  sessionStorage.setItem('sw-reload-done', 'true');
                  window.location.reload();
                  return;
                }
              }
            });
          }
        }
      })();
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
